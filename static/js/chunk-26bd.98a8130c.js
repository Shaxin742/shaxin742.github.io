(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-26bd"],{"+4MS":function(t,e,n){"use strict";var a=n("WT17");n.n(a).a},EF5k:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"a",function(){return l});var a=n("t3Un");function o(t){return Object(a.a)({url:"/Announcements",method:"get",params:t})}function i(t){return Object(a.a)({url:t,method:"get"})}function r(t){return Object(a.a)({url:"/Announcements",method:"delete",data:t})}function l(t){return Object(a.a)({url:"/Announcements",method:"post",data:t})}},IhUM:function(t,e,n){"use strict";n.r(e);var a=n("XINx"),o=n("EF5k"),i=n("mt6u"),r={name:"DoDialog",directives:{elDragDialog:a.a},data:function(){return{dialogVisible:!1,fileList:[],title:"",form:{title:"",content:"",is_channel:1},formRules:{title:[{required:!0,trigger:"blur",message:"请输入标题"}],content:[{required:!0,trigger:"blur",message:"请输入公告"}]},onClosed:function(){}}},methods:{init:function(){this.$store.commit("CLOSE_WAITING"),this.title="新增公告信息",this.form.title="",this.form.content=""},handleClose:function(t){this.$confirm("确认关闭？","确认信息",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(e){t()}).catch(function(t){})},open:function(){var t=this;this.dialogVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()}),this.init()},close:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.a.CLOSE;if(this.dialogVisible&&(this.dialogVisible=!1,"function"==typeof this.onClosed)){var e={option:t,sender:this};this.onClosed(e)}},confirm:function(){var t=this;console.log(this.form);try{this.$refs.form.validate(function(e){e&&Object(o.a)(t.form).then(function(e){console.log(e),0===e.error_code&&(t.$message({message:"提交成功",type:"success"}),t.close(i.a.CONFIRM))})})}catch(t){this.$message.error("获取数据失败")}}}},l=n("KHd+"),s=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"content",attrs:{visible:t.dialogVisible,"before-close":t.handleClose,title:t.title,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("el-input",{attrs:{rows:2,type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.confirm()}}},[t._v("确定")])],1)],1)],1)])],1)},[],!1,null,null,null);s.options.__file="doDialog.vue";var c=s.exports,u=n("23rR"),d=n("Mz3J"),h=(n("dunZ"),n("EQU6")),f=n("dunZ"),p={name:"UserManage",components:{doDialog:c,titleLeft:u.a,pdfViewer:h.a,pagination:d.a},data:function(){return{currentTotal:7,currentPage:1,searchVal:"",lasrSearchVal:"",flag:!1,areaTrans:{1:"大陆",2:"港台",3:"欧美",4:"日韩",5:"其他"},genderTrans:{1:"男歌手",2:"女歌手",3:"组合乐队",4:"其他"},hotTrans:{1:"热门",0:"不热门"},loading:!1,tableData:[],multipleSelection:[],currentRow:null,isSearch:!1}},computed:{hasSelect:function(){return null!==this.currentRow},hasChecked:function(){return 0!==this.multipleSelection.length||null!==this.currentRow},hasSearch:function(){return""!==this.searchVal.trim()}},watch:{searchVal:function(t,e){""===t&&this.loadData()}},mounted:function(){this.loadData()},methods:{fetchData:function(){this.isSearch?this.search():this.loadData()},loadData:function(){var t=this;try{this.loading=!0,this.isSearch&&(this.currentPage=1,this.$refs.pageN.init()),this.isSearch=!1;var e={page_index:this.currentPage,page_size:7,is_chl:1};Object(o.c)(e).then(function(e){0===e.error_code&&(t.loading=!1,t.currentTotal=e.data[0].total,t.tableData=e.data[0].data)})}catch(t){this.$message.error("获取数据失败")}},CurrentPage:function(t){this.currentPage=t,this.fetchData()},search:function(){var t=this;if(""!==this.searchVal.trim()){this.loading=!0,this.flag?this.lasrSearchVal!==this.searchVal&&(this.currentPage=1,this.$refs.pageN.init(),this.flag=!1):(this.lasrSearchVal=this.searchVal,this.flag=!0),this.isSearch||(this.currentPage=1,this.$refs.pageN.init()),this.isSearch=!0;var e="/Announcements/"+this.searchVal+"/"+this.currentPage+"/7/1";Object(o.d)(e).then(function(e){0===e.error_code?(t.loading=!1,t.currentTotal=e.data[0].total,t.tableData=e.data[0].data):t.loading=!1})}},handleSelectionChange:function(t){this.multipleSelection=t},handleCurrenttableChange:function(t){this.currentRow=t},tableRowClassName:function(t){var e=t.row;t.rowIndex;return console.log(e),0===e.status?"warning-row":""},edit:function(){var t=this;t.$refs.doDialog.open(this.currentRow),t.$refs.doDialog.onClosed=function(e){e.option===i.a.CONFIRM&&t.fetchData()}},addNew:function(){var t=this;t.$refs.doDialog.open(),t.$refs.doDialog.onClosed=function(e){e.option===i.a.CONFIRM&&t.fetchData()}},remove:function(){var t=this;this.$confirm("此操作将永久修改该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];t.multipleSelection.length>0?e=t.multipleSelection:e.push(t.currentRow);var n=[],a=!0;if(e.map(function(t){0!==t.status?n.push(t.id):a=!1}),a){var i={deleted_id:n};Object(o.b)(i).then(function(e){1===e.error_code&&(t.fetchData(),t.$message({type:"success",message:"修改成功!"}))})}else t.$message.error("不可修改已失效公告"),n=[]}).catch(function(){t.$message({type:"info",message:"已取消修改"})})},downPdf:function(t){console.log(t),f.saveAs(t.file_path,"合同")},openPdf:function(t){this.$refs.pdfViewer.open()}}},m=(n("+4MS"),Object(l.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{attrs:{shadow:"hover"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:9}},[n("titleLeft")],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"prompt"},[t._v("\n          红色行表示该公告已失效\n        ")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticStyle:{"text-align":"right"}},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1)]),t._v(" "),n("el-col",{attrs:{span:1}},[n("el-button",{attrs:{disabled:!t.hasSearch,type:"primary",icon:"el-icon-search",circle:""},on:{click:function(e){t.search()}}})],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticStyle:{"text-align":"right"}},[this.$operationTrans[this.$store.state.routerAuth.canAdd]?n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",circle:""},on:{click:function(e){t.addNew()}}}):t._e(),t._v(" "),this.$operationTrans[this.$store.state.routerAuth.canDelete]?n("el-button",{attrs:{disabled:!t.hasChecked,type:"warning",icon:"el-icon-refresh",circle:""},on:{click:function(e){t.remove()}}}):t._e()],1)])],1)],1),t._v(" "),n("el-card",{attrs:{shadow:"hover"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"floRight table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName,border:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"current-change":t.handleCurrenttableChange,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"内容"}})],1)],1),t._v(" "),n("el-card",{attrs:{shadow:"hover"}},[n("div",{staticClass:"block",staticStyle:{"text-align":"right"}},[n("pagination",{ref:"pageN",attrs:{"current-total":t.currentTotal,"current-page":t.currentPage},on:{CurrentPage:t.CurrentPage}})],1)]),t._v(" "),n("do-dialog",{ref:"doDialog"}),t._v(" "),n("pdf-viewer",{ref:"pdfViewer"})],1)},[],!1,null,"279d27a8",null));m.options.__file="index.vue";e.default=m.exports},WT17:function(t,e,n){},dunZ:function(t,e,n){(function(e){var n=function(){try{return Function("return this")()||(0,eval)("this")}catch(t){return"object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof e&&e.global===e?e:this}}();function a(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){r(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function o(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),e.status>=200&&e.status<=299}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var r=n.saveAs||"object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,r){var l=n.URL||n.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener","string"==typeof t?(s.href=t,s.origin!==location.origin?o(s.href)?a(t,e,r):i(s,s.target="_blank"):i(s)):(s.href=l.createObjectURL(t),setTimeout(function(){l.revokeObjectURL(s.href)},4e4),setTimeout(function(){i(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(o(t))a(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){clikc(i)})}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Depricated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return a(t,e,o);var r="application/octet-stream"===t.type,l=/constructor/i.test(n.HTMLElement)||n.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&l)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},c.readAsDataURL(t)}else{var u=n.URL||n.webkitURL,d=u.createObjectURL(t);i?i.location=d:location.href=d,i=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}};t.exports=n.saveAs=r.saveAs=r}).call(this,n("yLpj"))}}]);