(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5e85"],{"23rR":function(e,t,n){"use strict";var i={name:"LeftTitle",data:function(){return{title:""}},created:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var e=this.$route.matched.filter(function(e){return e.name});this.title=e[e.length-1].name}}},a=n("KHd+"),o=Object(a.a)(i,function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"titleLeft"},[this._v("\n  "+this._s(this.title)+"\n")])},[],!1,null,null,null);o.options.__file="index.vue";t.a=o.exports},I5UY:function(e,t,n){"use strict";var i=n("JNpO");n.n(i).a},JNpO:function(e,t,n){},JhLU:function(e,t,n){"use strict";n.d(t,"j",function(){return a}),n.d(t,"l",function(){return o}),n.d(t,"i",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"k",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"m",function(){return h}),n.d(t,"a",function(){return p}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return m}),n.d(t,"b",function(){return g});var i=n("t3Un");function a(){return Object(i.a)({url:"/groups",method:"get"})}function o(e){return Object(i.a)({url:e,method:"get"})}function r(e){return Object(i.a)({url:"/groups",method:"post",data:e})}function s(e){return Object(i.a)({url:"/groups",method:"put",data:e})}function l(e){return Object(i.a)({url:"/groups",method:"delete",data:e})}function c(){return Object(i.a)({url:"/modules",method:"get"})}function u(e){return Object(i.a)({url:e,method:"get"})}function d(e){return Object(i.a)({url:"/Users",method:"get",params:e})}function h(e){return Object(i.a)({url:e,method:"get"})}function p(e){return Object(i.a)({url:"/Users",method:"post",data:e})}function f(e){return Object(i.a)({url:"/Users",method:"delete",data:e})}function m(e){return Object(i.a)({url:"/Users",method:"put",data:e})}function g(e){return Object(i.a)({url:"/auth/users",method:"get",params:e})}},Jk7x:function(e,t,n){},Mz3J:function(e,t,n){"use strict";var i={props:{currentTotal:{type:Number,default:function(){return 1}},currentPage:{type:Number,default:function(){return 1}},pageSize:{type:Number,default:function(){return 7}}},data:function(){return{currentPage1:1}},watch:{currentTotal:function(){console.log(this.currentTotal)},currentPage:function(){console.log(this.currentPage)}},methods:{handlePageSizeChange:function(e){console.log("每页 "+e+" 条")},handlePageCurrentChange:function(e){this.$emit("CurrentPage",e)},init:function(){this.currentPage1=1}}},a=(n("XCmQ"),n("KHd+")),o=Object(a.a)(i,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{attrs:{"current-page":e.currentPage1,"page-size":e.pageSize,total:e.currentTotal,background:"",layout:"prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage1=t},"size-change":e.handlePageSizeChange,"current-change":e.handlePageCurrentChange}})},[],!1,null,null,null);o.options.__file="index.vue";t.a=o.exports},PrdM:function(e,t,n){"use strict";n.r(t);var i=n("gDS+"),a=n.n(i),o=n("XINx"),r=n("JhLU"),s=n("mt6u"),l={name:"Dodialog",directives:{elDragDialog:o.a},data:function(){return{title:"",dialogVisible:!1,onClosed:function(){},id:-1,form:{name:"",descript:""},formRules:{name:[{required:!0,trigger:"blur",message:"请输入类别名"}],descript:[{required:!0,trigger:"blur",message:"请输入描述"}]},is_add:!1,is_update:!1,is_deleted:!1,is_download:!1,is_imported:!1,is_exported:!1,stateTrans:{true:1,false:0},editTeans:{"是":!0,"否":!1}}},methods:{open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"{}"===a()(e)?(this.title="新增用户组",this.init()):(this.title="修改用户组",this.init(e)),this.dialogVisible=!0},handleClose:function(e){this.$confirm("确认关闭？","确认信息",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(t){e()}).catch(function(e){})},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.CLOSE;if(this.dialogVisible&&(this.dialogVisible=!1,"function"==typeof this.onClosed)){var t={option:e,sender:this};this.onClosed(t)}},init:function(e){e?(this.id=e.id,this.form.name=e.user_group_name,this.form.descript=e.descript,this.is_add=this.editTeans[e.is_add],this.is_update=this.editTeans[e.is_update],this.is_exported=this.editTeans[e.is_exported],this.is_imported=this.editTeans[e.is_imported],this.is_deleted=this.editTeans[e.is_deleted],this.is_download=this.editTeans[e.is_download]):(this.id=0,this.form.name=this.form.descript="",this.is_download=this.is_deleted=this.is_imported=this.is_exported=this.is_update=this.is_add=!1)},confirm:function(){var e=this;try{this.$refs.form.validate(function(t){if(t){var n={user_group_name:e.form.name,is_add:e.stateTrans[e.is_add],is_update:e.stateTrans[e.is_update],is_exported:e.stateTrans[e.is_exported],is_imported:e.stateTrans[e.is_imported],is_deleted:e.stateTrans[e.is_deleted],is_download:e.stateTrans[e.is_download],descript:e.form.descript};e.id?(n.group_id=e.id,Object(r.e)(n).then(function(t){0===t.error_code?(e.$message({message:"提交成功",type:"success"}),e.close(s.a.CONFIRM)):e.$message.error("提交失败")})):Object(r.i)(n).then(function(t){0===t.error_code&&(e.$message({message:"提交成功",type:"success"}),e.close(s.a.CONFIRM))})}})}catch(e){this.$message.error(e.message)}}}},c=(n("I5UY"),n("KHd+")),u=Object(c.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogVisible,"before-close":e.handleClose,title:e.title,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"描述",prop:"descript"}},[n("el-input",{model:{value:e.form.descript,callback:function(t){e.$set(e.form,"descript",t)},expression:"form.descript"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户权限"}},[n("el-checkbox",{attrs:{label:"新增权限"},model:{value:e.is_add,callback:function(t){e.is_add=t},expression:"is_add"}}),e._v(" "),n("el-checkbox",{attrs:{label:"修改权限"},model:{value:e.is_update,callback:function(t){e.is_update=t},expression:"is_update"}}),e._v(" "),n("el-checkbox",{attrs:{label:"删除权限"},model:{value:e.is_deleted,callback:function(t){e.is_deleted=t},expression:"is_deleted"}}),e._v(" "),n("el-checkbox",{attrs:{label:"下载权限"},model:{value:e.is_download,callback:function(t){e.is_download=t},expression:"is_download"}}),e._v(" "),n("el-checkbox",{attrs:{label:"导入权限"},model:{value:e.is_imported,callback:function(t){e.is_imported=t},expression:"is_imported"}}),e._v(" "),n("el-checkbox",{attrs:{label:"导出权限"},model:{value:e.is_exported,callback:function(t){e.is_exported=t},expression:"is_exported"}})],1),e._v(" "),n("el-form-item",[n("el-button",{on:{click:function(t){e.confirm()}}},[e._v("确定")])],1)],1)],1)])],1)},[],!1,null,"549345bb",null);u.options.__file="doDialog.vue";var d=u.exports,h=n("23rR"),p=n("Mz3J"),f={name:"UserGroupManage",components:{doDialog:d,titleLeft:h.a,pagination:p.a},data:function(){return{searchVal:"",isEdit:!1,loading:!1,tableData:[],multipleSelection:[],currentRow:null,authTrans:{0:"否",1:"是"}}},computed:{hasSelect:function(){return null!==this.currentRow},hasChecked:function(){return 0!==this.multipleSelection.length||null!==this.currentRow},hasSearch:function(){return""!==this.searchVal.trim()}},watch:{searchVal:function(e,t){""===e&&this.loadData()}},mounted:function(){this.loadData(),console.log(this.$store.state.routerAuth.canAdd),console.log(this.$operationTrans[this.$store.state.routerAuth.canAdd])},methods:{loadData:function(){var e=this;try{this.isEdit=!1,this.loading=!0,Object(r.j)().then(function(t){e.loading=!1,t.data.map(function(t){t.is_add=e.authTrans[t.is_add],t.is_deleted=e.authTrans[t.is_deleted],t.is_download=e.authTrans[t.is_download],t.is_update=e.authTrans[t.is_update],t.is_exported=e.authTrans[t.is_exported],t.is_imported=e.authTrans[t.is_imported]}),e.tableData=t.data,e.currentTotal=t.total})}catch(e){this.$message.error(e.message)}},search:function(){var e=this;if(""!==this.searchVal.trim())try{this.loading=!0,this.isEdit=!0;var t="/groups/"+this.searchVal;Object(r.l)(t).then(function(t){e.loading=!1,t.data.map(function(t){t.is_add=e.authTrans[t.is_add],t.is_deleted=e.authTrans[t.is_deleted],t.is_download=e.authTrans[t.is_download],t.is_update=e.authTrans[t.is_update],t.is_exported=e.authTrans[t.is_exported],t.is_imported=e.authTrans[t.is_imported]}),e.tableData=t.data,e.currentTotal=t.total})}catch(e){this.$message.error(e.message)}},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrenttableChange:function(e){this.currentRow=e},edit:function(){var e=this;console.log(this.isEdit),e.$refs.doDialog.open(this.currentRow),e.$refs.doDialog.onClosed=function(t){t.option===s.a.CONFIRM&&(e.isEdit?e.search():e.loadData())}},addNew:function(){var e=this;e.$refs.doDialog.open(),e.$refs.doDialog.onClosed=function(t){t.option===s.a.CONFIRM&&(e.isEdit?e.search():e.loadData())}},remove:function(){var e=this;try{this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[],n=[];e.multipleSelection.length>0?t=e.multipleSelection:t.push(e.currentRow),t.map(function(e){n.push(e.id)}),Object(r.c)({deleted_id:n}).then(function(t){for(var i=[],a=0;a<e.tableData.length;a++)for(var o=0,r=0;r<n.length;r++)e.tableData[a].id!==n[r]&&++o===n.length&&i.push(e.tableData[a]);e.tableData=i,e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}catch(e){this.$message({type:"error",message:e.message})}}}},m=Object(c.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-card",{attrs:{shadow:"hover"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:15}},[n("titleLeft")],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticStyle:{"text-align":"right"}},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1)]),e._v(" "),n("el-col",{attrs:{span:1}},[n("el-button",{attrs:{disabled:!e.hasSearch,type:"primary",icon:"el-icon-search",circle:""},on:{click:function(t){e.search()}}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticStyle:{"text-align":"right"}},[this.$operationTrans[this.$store.state.routerAuth.canAdd]?n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",circle:""},on:{click:function(t){e.addNew()}}}):e._e(),e._v(" "),this.$operationTrans[this.$store.state.routerAuth.canEdit]?n("el-button",{attrs:{disabled:!e.hasSelect,type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){e.edit()}}}):e._e(),e._v(" "),this.$operationTrans[this.$store.state.routerAuth.canDelete]?n("el-button",{attrs:{disabled:!e.hasChecked,type:"warning",icon:"el-icon-delete",circle:""},on:{click:function(t){e.remove()}}}):e._e()],1)])],1)],1),e._v(" "),n("el-card",{attrs:{shadow:"hover"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"floRight",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"current-change":e.handleCurrenttableChange,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),n("el-table-column",{attrs:{prop:"user_group_name",label:"用户组名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_add",label:"新增权限"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_update",label:"修改权限"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_deleted",label:"删除权限"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_download",label:"下载权限"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_exported",label:"导出权限"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_imported",label:"导入权限"}}),e._v(" "),n("el-table-column",{attrs:{prop:"descript",label:"描述"}})],1)],1),e._v(" "),n("do-dialog",{ref:"doDialog"})],1)},[],!1,null,null,null);m.options.__file="index.vue";t.default=m.exports},XCmQ:function(e,t,n){"use strict";var i=n("Jk7x");n.n(i).a},XINx:function(e,t,n){"use strict";var i={bind:function(e,t,n){var i=e.querySelector(".el-dialog__header"),a=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",a.style.cssText+=";top:0px;";var o=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,r=e.clientY-i.offsetTop,s=a.offsetWidth,l=a.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=a.offsetLeft,h=c-a.offsetLeft-s,p=a.offsetTop,f=u-a.offsetTop-l,m=o(a,"left"),g=o(a,"top");m.includes("%")?(m=+document.body.clientWidth*(+m.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(m=+m.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,o=e.clientY-r;-i>d?i=-d:i>h&&(i=h),-o>p?o=-p:o>f&&(o=f),a.style.cssText+=";left:"+(i+m)+"px;top:"+(o+g)+"px;",n.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},a=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(a)),i.install=a;t.a=i},mt6u:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={CONFIRM:"CONFIRM",CANCEL:"CANCEL",CLOSE:"CLOSE"}}}]);