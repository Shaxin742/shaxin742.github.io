(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cb04"],{BSEp:function(e,t,a){"use strict";a.r(t);var i=a("gDS+"),n=a.n(i),r=a("QmE6"),o=a("YcAW"),l=a("XINx"),s=a("3s8Z"),c=a("zEiY"),u=a("mt6u"),m={name:"DoDialog",directives:{elDragDialog:l.a},components:{upload:s.a,imgShow:r.a,audioPlay:o.a},data:function(){return{dialogVisible:!1,fileList:[],title:"",form:{id:"",name:"",area:"",gender:"",birthday:"",pinyin:"",description:"",avatar_file:"",is_hot:""},formRules:{name:[{required:!0,trigger:"blur",message:"请输入名字"}],pinyin:[{required:!0,trigger:"blur",message:"请输入拼音"},{pattern:/^[A-Za-z]+$/,message:"请输入字母"}],area:[{required:!0,trigger:"change",message:"请选择"}],gender:[{required:!0,trigger:"change",message:"请选择"}],is_hot:[{required:!0,trigger:"change",message:"请选择"}],birthday:[{required:!0,trigger:"change",message:"请选择"}],description:[{required:!0,trigger:"blur",message:"请输入描述"}]},onClosed:function(){},areaOptions:[{value:1,label:"大陆"},{value:2,label:"港台"},{value:3,label:"欧美"},{value:4,label:"日韩"},{value:5,label:"其他"}],genderOptions:[{value:1,label:"男歌手"},{value:2,label:"女歌手"},{value:3,label:"组合乐队"},{value:4,label:"其他"}],hotOptions:[{value:1,label:"热门"},{value:0,label:"不热门"}],hotToOptions:{"不热门":0,"热门":1},genderToOptions:{"男歌手":1,"女歌手":2,"组合乐队":3,"其他":4},areaToOptions:{"大陆":1,"港台":2,"欧美":3,"日韩":4,"其他":5}}},methods:{init:function(e){this.$store.commit("CLOSE_WAITING"),"{}"!==n()(e)?(this.title="修改艺人信息",this.form.name=e.name,this.form.description=e.description,this.form.id=e.id,this.form.area=e.area,this.form.gender=e.gender,this.form.birthday=e.birthday,this.form.pinyin=e.pinyin,this.form.avatar_file=e.avatar_file.split("/")[e.avatar_file.split("/").length-1],this.form.is_hot=e.is_hot,console.log(this.form.avatar_file),this.form.avatar_file&&(this.fileList=[{name:e.name,url:e.avatar_file}])):(this.title="新增艺人信息",this.form.id=0,this.form.name="",this.form.description="",this.form.area="",this.form.gender="",this.form.birthday="",this.form.pinyin="",this.form.avatar_file="",this.fileList=[],this.form.is_hot="")},handleClose:function(e){this.$confirm("确认关闭？","确认信息",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(t){e()}).catch(function(e){})},open:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(t),this.dialogVisible=!0,this.$nextTick(function(){e.$refs.form.clearValidate()}),this.init(t)},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.a.CLOSE;if(this.dialogVisible&&(this.dialogVisible=!1,"function"==typeof this.onClosed)){var t={option:e,sender:this};this.onClosed(t)}},confirm:function(){var e=this;console.log(this.form);try{this.$refs.form.validate(function(t){if(t){if(!e.form.avatar_file)return void e.$message.error("请选择图片");e.form.id?("string"==typeof e.form.area&&(e.form.area=e.areaToOptions[e.form.area]),"string"==typeof e.form.gender&&(e.form.gender=e.genderToOptions[e.form.gender]),"string"==typeof e.form.is_hot&&(e.form.is_hot=e.hotToOptions[e.form.is_hot]),e.$store.commit("SHOW_WAITING"),Object(c.k)(e.form).then(function(t){e.$store.commit("CLOSE_WAITING"),0===t.error_code&&(e.$message({message:"提交成功",type:"success"}),e.close(u.a.CONFIRM))})):(e.$store.commit("SHOW_WAITING"),Object(c.c)(e.form).then(function(t){e.$store.commit("CLOSE_WAITING"),0===t.error_code&&(e.$message({message:"提交成功",type:"success"}),e.close(u.a.CONFIRM))}))}})}catch(e){this.$store.commit("CLOSE_WAITING"),this.$message.error("获取数据失败")}},getFileList:function(e){this.form.avatar_file=this.$urlTrans(e),console.log(this.form.avatar_file)},showFile:function(e){console.log(e),"music"===e.type?this.$refs.audioPlay.open(e.file):"photo"===e.type&&this.$refs.imgShow.open(e.file)}}},d=(a("DS0E"),a("KHd+")),f=Object(d.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"content",attrs:{visible:e.dialogVisible,"before-close":e.handleClose,title:"查看详情",width:"65%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"80px"}},[a("el-form-item",{staticClass:"wid50 fll",attrs:{label:"名字",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"wid50 fll",attrs:{label:"拼音",prop:"pinyin"}},[a("el-input",{model:{value:e.form.pinyin,callback:function(t){e.$set(e.form,"pinyin",t)},expression:"form.pinyin"}})],1),e._v(" "),a("el-form-item",{staticClass:"wid50 fll",attrs:{label:"地区",prop:"area"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}},e._l(e.areaOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticClass:"wid50 fll",attrs:{label:"性别",prop:"gender"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},e._l(e.genderOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticClass:"wid50 fll",attrs:{label:"生日",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),e._v(" "),a("el-form-item",{staticClass:"wid50 fll",attrs:{label:"描述",prop:"description"}},[a("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{staticClass:"wid50 fll",attrs:{label:"热门",prop:"is_hot"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.is_hot,callback:function(t){e.$set(e.form,"is_hot",t)},expression:"form.is_hot"}},e._l(e.hotOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"both"}},[a("upload",{attrs:{"file-list":e.fileList,"upload-type":"photo"},on:{getFileList:e.getFileList,showFile:e.showFile}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirm()}}},[e._v("确定")])],1)],1)],1)]),e._v(" "),a("imgShow",{ref:"imgShow"}),e._v(" "),a("audioPlay",{ref:"audioPlay"})],1)},[],!1,null,"bb64402e",null);f.options.__file="doDialog.vue";var h=f.exports,p=a("bfoT"),g=a("23rR"),v=a("Mz3J"),_={name:"UserManage",components:{doDialog:h,titleLeft:g.a,pagination:v.a,audioPlay:o.a},data:function(){return{currentTotal:7,currentPage:1,searchVal:"",lasrSearchVal:"",flag:!1,loading:!1,tableData:[],multipleSelection:[],currentRow:null,optionTrans:{1:"华语",2:"英语",3:"日韩语",4:"其他"},isSearch:!1,begin_time:"",end_time:"",chl_name:"",music_name:"",music_code:"",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},computed:{hasSearch:function(){return""!==this.searchVal.trim()}},watch:{searchVal:function(e,t){""===e&&this.loadData()},begin_time:function(e,t){e!==t&&(this.isSearch=!0)},end_time:function(e,t){e!==t&&(this.isSearch=!0)},chl_name:function(e,t){e!==t&&(this.isSearch=!0)},music_name:function(e,t){e!==t&&(this.isSearch=!0)},music_code:function(e,t){e!==t&&(this.isSearch=!0)}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;try{this.loading=!0,this.isSearch&&(this.currentPage=1,this.$refs.pageN.init());var t={page_index:this.currentPage,page_size:7,is_chl:0};this.begin_time&&(t.begin_time=this.begin_time),this.end_time&&(t.end_time=this.end_time),this.chl_name&&(t.chl_name=this.chl_name),this.music_name&&(t.music_name=this.music_name),this.music_code&&(t.music_code=this.music_code),console.log(t),Object(p.i)(t).then(function(t){console.log(t),e.loading=!1,e.currentTotal=t.data[0].total,t.data[0].data.map(function(t){t.language=e.optionTrans[t.language],t.price_t=t.price+"元/月"}),e.isSearch=!1,e.tableData=t.data[0].data})}catch(e){this.$message.error("获取数据失败")}},CurrentPage:function(e){this.currentPage=e,this.loadData()},handleCurrenttableChange:function(e){console.log(e),this.currentRow=e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 0===t.status?"warning-row":""},handleSelectionChange:function(e){console.log(this.multipleSelection),this.multipleSelection=e},openUrl:function(e){console.log(e);var t={name:e.name,url:e.music_file};this.$refs.audioPlay.open(t)}}},b=(a("m8Nv"),Object(d.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{attrs:{shadow:"hover"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"in"},[e._v("开始时间:")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-date-picker",{attrs:{"picker-options":e.pickerOptions,align:"right",type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请输入开始时间"},model:{value:e.begin_time,callback:function(t){e.begin_time=t},expression:"begin_time"}})],1)]),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"in"},[e._v("结束时间:")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-date-picker",{attrs:{"picker-options":e.pickerOptions,align:"right","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请输入结束时间"},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}})],1)]),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"in"},[e._v("合作方名称:")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-input",{attrs:{placeholder:"请输入合作方名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.loadData(t):null}},model:{value:e.chl_name,callback:function(t){e.chl_name=t},expression:"chl_name"}})],1)]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",circle:""},on:{click:function(t){e.loadData()}}})],1)])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"in"},[e._v("歌曲名称:")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-input",{attrs:{placeholder:"请输入歌曲名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.loadData(t):null}},model:{value:e.music_name,callback:function(t){e.music_name=t},expression:"music_name"}})],1)]),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"in"},[e._v("歌曲编码:")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-input",{attrs:{placeholder:"请输入歌曲编码",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.loadData(t):null}},model:{value:e.music_code,callback:function(t){e.music_code=t},expression:"music_code"}})],1)])],1)],1),e._v(" "),a("el-card",{attrs:{shadow:"hover"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName,border:"",stripe:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrenttableChange}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"歌曲名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"artist_name",label:"艺人名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"album_name",label:"专辑名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"down_times",label:"下载次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price_t",label:"价格"}})],1)],1),e._v(" "),a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"block",staticStyle:{"text-align":"right"}},[a("pagination",{ref:"pageN",attrs:{"current-total":e.currentTotal,"page-size":7,"current-page":e.currentPage},on:{CurrentPage:e.CurrentPage}})],1)]),e._v(" "),a("do-dialog",{ref:"doDialog"}),e._v(" "),a("audioPlay",{ref:"audioPlay"})],1)},[],!1,null,"7c8d992a",null));b.options.__file="index.vue";t.default=b.exports},DS0E:function(e,t,a){"use strict";var i=a("WUUd");a.n(i).a},Jpuv:function(e,t,a){},WUUd:function(e,t,a){},bfoT:function(e,t,a){"use strict";a.d(t,"f",function(){return n}),a.d(t,"j",function(){return r}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return s}),a.d(t,"g",function(){return c}),a.d(t,"k",function(){return u}),a.d(t,"l",function(){return m}),a.d(t,"c",function(){return d}),a.d(t,"i",function(){return f}),a.d(t,"h",function(){return h}),a.d(t,"e",function(){return p});var i=a("t3Un");function n(e){return Object(i.a)({url:"/Companys",method:"get",params:e})}function r(e){return Object(i.a)({url:e,method:"get"})}function o(e){return Object(i.a)({url:"/Companys",method:"put",data:e})}function l(e){return Object(i.a)({url:"/Companys",method:"post",data:e})}function s(e){return Object(i.a)({url:"/Contracts",method:"post",data:e})}function c(e){return Object(i.a)({url:"/Contracts",method:"get",params:e})}function u(e){return Object(i.a)({url:e,method:"get"})}function m(e){return Object(i.a)({url:e,method:"get"})}function d(e){return Object(i.a)({url:"/Contracts",method:"delete",data:e})}function f(e){return Object(i.a)({url:"/SongLists",method:"get",params:e})}function h(){return Object(i.a)({url:"/BoLogs",method:"get"})}function p(e){return Object(i.a)({url:e,method:"get"})}},m8Nv:function(e,t,a){"use strict";var i=a("Jpuv");a.n(i).a}}]);